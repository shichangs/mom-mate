# MomMate RPD（需求产品文档）

- 文档版本：v1.0
- 文档日期：2026-02-07
- 适用范围：`MomMate` iOS 项目（当前代码基线）
- 平台：iOS 17.0+

## 1. 产品概述

MomMate 是一款面向新手父母的婴儿成长记录工具，核心解决“记录零散、回顾困难、趋势不清晰”问题。  
产品通过睡眠、饮食、成长里程碑三大模块，帮助家长快速记录并获得基础统计洞察。

## 2. 背景与问题

- 家长在夜间或忙碌状态下，记录行为需要“低操作成本”。
- 宝宝成长数据分散在聊天、备忘录、纸笔中，难以形成连续时间线。
- 仅有记录不够，用户需要可视化统计来辅助判断作息与喂养规律。

## 3. 产品目标（R）

### 3.1 业务目标

- 建立一个可持续使用的日常记录工具，形成宝宝生活数据沉淀。
- 支持家长快速回顾近期行为，降低“记不清”的决策成本。

### 3.2 用户目标

- 10 秒内完成一次睡眠或饮食记录。
- 1 分钟内完成“今天发生了什么”的回顾。
- 能查看近 7 天的睡眠/饮食趋势变化。

### 3.3 成功指标（建议）

- D7 留存率 >= 25%
- 人均日记录次数 >= 3
- 睡眠记录完成率（开始后有结束）>= 80%
- 统计页周访问率 >= 40%

## 4. 用户与场景

### 4.1 目标用户

- 0-2 岁婴幼儿家长（主要为母亲，次要为共同照护者）
- 对记录有需求但不愿使用复杂母婴系统的用户

### 4.2 核心场景

- 夜间一键记录宝宝入睡/醒来
- 白天记录饮食类型与常吃食物
- 记录宝宝“第一次微笑/翻身/站立”等成长时刻
- 每天查看统计，判断是否存在明显异常

## 5. 功能需求（P）

### P0（必须）

1. 睡眠记录
- 一键开始睡眠、结束睡眠
- 支持“补录时间”（若干分钟前）
- 历史记录查看、编辑、删除
- 展示最近 5 条记录和完整历史列表

2. 饮食记录
- 快速新增饮食记录（餐次 + 食物）
- 按餐次筛选记录
- 今日饮食摘要（次数/分类）
- 支持删除记录

3. 成长里程碑
- 新增里程碑（日期、标题、分类、描述）
- 快捷添加常见里程碑
- 按分类筛选
- 编辑/删除里程碑

4. 统计分析
- 睡眠统计（今日/周/月维度预览）
- 饮食统计（过去 7 天频次、类型分布、摘要）
- 图形化展示（柱状/环形）

5. 基础设置
- 全局字体缩放（0.8x-1.5x）

### P1（应该有）

1. 常用食物管理（妈妈食谱）
- 添加自定义常用食物
- 删除自定义食物

2. 内置文档/笔记模块
- 查看与编辑 Markdown 文档

### P2（可选优化）

1. 数据导出（CSV/分享）
2. 多宝宝档案切换
3. 记录提醒（本地通知）

## 6. 交互与体验要求

- 首页采用 Tab 结构：睡眠、饮食、统计、成长。
- 重点操作（新增/开始/结束）需在首屏可见。
- 空状态需提供明确引导文案。
- 动画与视觉语言统一（渐变、玻璃卡片、状态反馈）。
- 字体缩放后需保证核心页面不遮挡、不截断主要操作按钮。

## 7. 数据与技术要求

### 7.1 数据对象

- SleepRecord：入睡时间、醒来时间、时长
- MealRecord：时间、餐次、食物、食量、备注
- Milestone：日期、标题、描述、分类

### 7.2 持久化

- 当前版本：`UserDefaults + JSON`
- 演进目标：迁移到 `SwiftData`（已有模型基础）并评估 CloudKit 同步一致性

### 7.3 性能

- 常规列表页面首屏渲染 <= 1s（中端机）
- 统计计算在 1000 条记录量级下可接受（无明显卡顿）

## 8. 非功能需求

- 稳定性：核心记录链路（新增/更新/删除）不可崩溃
- 可用性：离线可用，本地可读写
- 隐私：默认仅本地存储，不上传第三方服务
- 可维护性：核心业务逻辑集中在 Manager 层，便于后续迁移存储方案

## 9. 验收标准（UAT）

1. 睡眠
- 可开始并结束一条睡眠记录，时长显示正确
- 可通过“选择其他时间”补录，并正确进入历史
- 历史记录可编辑时间并保存生效

2. 饮食
- 可新增一条饮食记录并在列表立即可见
- 餐次筛选后列表结果正确
- 今日摘要中的次数与列表数据一致

3. 里程碑
- 可新增/编辑/删除里程碑
- 分类筛选正确，时间线顺序正确（新到旧）

4. 统计
- 睡眠统计在不同周期切换时数据变化正确
- 饮食统计图表能在有/无数据两种状态下正常显示

5. 设置
- 字体缩放调整后，四个主 Tab 页面文字同步变化

## 10. 风险与待决策项

- 当前 `UserDefaults` 在数据量增长后存在性能与可维护性风险。
- 代码中已存在 SwiftData/CloudKit 配置与旧存储并存，需明确唯一数据源策略。
- 测试数据自动生成逻辑适合开发阶段，发布版需增加开关或移除。

## 11. 版本规划建议

### V1.0（当前能力收敛）

- 完成三大记录模块 + 统计 + 设置
- 修正边界问题并补齐基础测试用例

### V1.1（体验增强）

- 自定义食物联动到快速添加面板
- 增加本地通知提醒
- 优化统计性能与图表可读性

### V1.2（数据升级）

- 迁移到 SwiftData 单一存储
- 引入可控的 iCloud 同步策略
- 提供数据导出与备份能力

